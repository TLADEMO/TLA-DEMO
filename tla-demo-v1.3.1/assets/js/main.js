function calcArrears(){const r=parseFloat(document.querySelector('#rent')?.value||0);const m=parseFloat(document.querySelector('#months')?.value||0);const l=parseFloat(document.querySelector('#legal')?.value||0);if(document.querySelector('#kpi-arrears')){const a=r*m;const e=a+l;document.querySelector('#kpi-arrears').textContent='£'+a.toLocaleString();document.querySelector('#kpi-legal').textContent='£'+l.toLocaleString();document.querySelector('#kpi-total').textContent='£'+e.toLocaleString();}}document.addEventListener('input',e=>{if(['rent','months','legal'].includes(e.target.id))calcArrears()});document.addEventListener('DOMContentLoaded',calcArrears);async function loadRates(){try{const res=await fetch('assets/data/mortgage-rates.json');const data=await res.json();const tbody=document.querySelector('#rates-body');const stamp=document.querySelector('#rates-stamp');if(!tbody)return;stamp.textContent='Updated: '+data.asof;tbody.innerHTML=data.rates.map(r=>`<tr><td>${r.ltv}%</td><td>${r.term} yr</td><td>${r.rate}%</td><td>${r.provider}</td><td>${r.type}</td></tr>`).join('')}catch(e){}}document.addEventListener('DOMContentLoaded',loadRates);